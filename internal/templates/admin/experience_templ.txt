<form hx-post=\"/admin/experience\" hx-trigger=\"submit\" hx-swap=\"none\"><!-- Header --><div class=\"flex flex-row justify-between items-center w-full p-5\"><h1 class=\"text-2xl font-bold\">Craft the experience</h1><button class=\"btn btn-primary\">Save</button></div><div class=\"flex w-full gap-5 lg:flex-row flex-col\"><div class=\"grid h-fit px-5 flex-grow\"><!--  settings --><div class=\"divider divider-accent font-bold pb-5\">Navigation</div><!-- Navigation Method --><div class=\"mb-5\"><div class=\"flex flex-row-reverse justify-end md:justify-start md:flex-row\"><strong>Navigation Method</strong><div class=\"dropdown dropdown-hover\"><div tabindex=\"0\" role=\"button\" class=\"btn btn-circle btn-ghost btn-xs text-info\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-4 h-4 lucide lucide-info\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><path d=\"M12 16v-4\"></path><path d=\"M12 8h.01\"></path></svg></div><div tabindex=\"0\" class=\"card compact dropdown-content bg-base-200 rounded-box z-[1] w-72 shadow\">
<div tabindex=\"0\" class=\"card-body\"><h2 class=\"card-title\">
</h2><p>
</p></div>
</div></div></div><div class=\"\">How should the players navigate the game?</div><div class=\"form-control lg:w-full py-3\">
<label class=\"label cursor-pointer\"><span class=\"label-text\">
</span> <input type=\"radio\" name=\"navigationMethod\" value=\"
\" data-index=\"
\" class=\"radio radio-primary\" onchange=\"updatePreview()\"
 checked
></label>
</div></div><!-- Navigation Mode --><div class=\"my-5\"><div class=\"flex flex-row-reverse justify-end md:justify-start md:flex-row\"><strong>Navigation Mode</strong><div class=\"dropdown dropdown-hover\"><div tabindex=\"0\" role=\"button\" class=\"btn btn-circle btn-ghost btn-xs text-info\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-4 h-4 lucide lucide-info\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><path d=\"M12 16v-4\"></path><path d=\"M12 8h.01\"></path></svg></div><div tabindex=\"0\" class=\"card compact dropdown-content bg-base-200 rounded-box z-[1] w-72 shadow\">
<div tabindex=\"0\" class=\"card-body\"><h2 class=\"card-title\">
</h2><p>
</p></div>
</div></div></div><span class=\"\">How should the game decide which location(s) to show next?</span><div class=\"form-control w-full py-3\">
<label class=\"label cursor-pointer\"><span class=\"label-text\">
</span> <input type=\"radio\" name=\"navigationMode\" value=\"
\" data-index=\"
\" class=\"radio radio-primary\"
 checked
 onchange=\"updatePreview()\"></label>
</div></div><!-- Maximum locations to show --><div class=\"my-5\"><div class=\"flex flex-row-reverse justify-end md:justify-start md:flex-row\"><strong>Maximum number of locations to show</strong><div class=\"dropdown dropdown-hover\"><div tabindex=\"0\" role=\"button\" class=\"btn btn-circle btn-ghost btn-xs text-info\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-4 h-4 lucide lucide-info\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><path d=\"M12 16v-4\"></path><path d=\"M12 8h.01\"></path></svg></div><div tabindex=\"0\" class=\"card compact dropdown-content bg-base-200 rounded-box z-[1] w-72 shadow-2xl\"><div tabindex=\"0\" class=\"card-body\"><h2 class=\"card-title\">Maximum number of locations</h2><p>This settings limits how many locations or clues are visible or valid for a team. This is useful for dispersing learners.</p><p>This setting is only enabled for Random mode. All locations are visible in Free Roam mode, and only the next is visible for Ordered.</p></div></div></div></div><label class=\"form-control w-full py-3\"><div class=\"label\"><span class=\"label-text\">How many locations should the team be presented with?</span> <span class=\"label-text-alt text-error font-bold hidden\">Disabled in <span id=\"mode-name\"></span> mode</span></div><input type=\"number\" name=\"maxLocations\" min=\"0\" step=\"1\" placeholder=\"3\" value=\"
\" class=\"input input-bordered w-full\" onkeyup=\"updatePreview()\" id=\"maxLocations\"><div class=\"label\"><span class=\"label-text-alt\">Set to 0 to show all</span></div></label></div><!-- End Maximum locations to show --><!-- Show visiting count --><div class=\"my-5\"><div class=\"flex flex-row-reverse justify-end md:justify-start md:flex-row\"><strong>Show team count</strong><div class=\"dropdown dropdown-hover\"><div tabindex=\"0\" role=\"button\" class=\"btn btn-circle btn-ghost btn-xs text-info\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-4 h-4 lucide lucide-info\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><path d=\"M12 16v-4\"></path><path d=\"M12 8h.01\"></path></svg></div><div tabindex=\"0\" class=\"card compact dropdown-content bg-base-200 rounded-box z-[1] w-72 shadow-2xl\"><div tabindex=\"0\" class=\"card-body\"><h2 class=\"card-title text-center\">Show visiting count</h2><p>This setting allows you to show how many teams are visiting a location. This can be useful for collaborative activities or minimising congestion.</p></div></div></div></div><div class=\"form-control w-full py-3\"><p class=\"label-text-alt text-error font-bold invisible text-right\" id=\"teamCountDisabledMessage\">Disabled when Show Clues is selected</p><label class=\"label cursor-pointer\"><span class=\"label-text\">Show the number of teams at each location?</span> <input type=\"checkbox\" id=\"showTeamCount\" name=\"showTeamCount\" class=\"toggle toggle-primary\" onchange=\"updatePreview()\"
 checked
></label></div></div><!-- End Show visiting count --><!-- Completion Method --><div class=\"my-5\"><div class=\"flex flex-row-reverse justify-end md:justify-start md:flex-row\"><strong>Default Completion Method</strong><div class=\"dropdown dropdown-hover\"><div tabindex=\"0\" role=\"button\" class=\"btn btn-circle btn-ghost btn-xs text-info\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-4 h-4 lucide lucide-info\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><path d=\"M12 16v-4\"></path><path d=\"M12 8h.01\"></path></svg></div><div tabindex=\"0\" class=\"card compact dropdown-content bg-base-200 rounded-box z-[1] w-72 shadow\">
<div tabindex=\"0\" class=\"card-body\"><h2 class=\"card-title\">
</h2><p>
</p></div>
</div></div></div><div class=\"\">How should players complete a location? This option sets the <em>default</em> mode for new locations.</div><div class=\"form-control w-full py-3\">
<label class=\"label cursor-pointer\"><span class=\"label-text\">
</span> <input type=\"radio\" name=\"completionMethod\" value=\"
\" data-index=\"
\" class=\"radio radio-primary\"
 checked
></label>
</div></div><!-- End Completion Method --><div class=\"divider divider-accent font-bold\">Points</div><!-- Enable Points --><div class=\"my-5\"><div class=\"flex flex-row-reverse justify-end md:justify-start md:flex-row\"><strong>Enable Points</strong><div class=\"dropdown dropdown-hover\"><div tabindex=\"0\" role=\"button\" class=\"btn btn-circle btn-ghost btn-xs text-info\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-4 h-4 lucide lucide-info\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><path d=\"M12 16v-4\"></path><path d=\"M12 8h.01\"></path></svg></div><div tabindex=\"0\" class=\"card compact dropdown-content bg-base-200 rounded-box z-[1] w-72 shadow-2xl\"><div tabindex=\"0\" class=\"card-body\"><h2 class=\"card-title text-center\">Enable Points</h2><p>This settings allows teams to accrue points for checking in. This setting makes the experience more gamelike but may impact intrinsic motivation.</p></div></div></div></div><div class=\"form-control w-full py-3\"><label class=\"label cursor-pointer\"><span class=\"label-text\">Enable Points for this instance?</span> <input type=\"checkbox\" id=\"enablePoints\" name=\"enablePoints\" class=\"toggle toggle-primary\" onchange=\"updatePreview()\"
 checked
></label></div></div><!-- End Enable Points --><!-- Bonus Points --><div class=\"my-5\"><div class=\"flex justify-between\"><div class=\"flex flex-row-reverse justify-end md:justify-start md:flex-row\"><strong>Bonus Points for First to Check-In</strong><div class=\"dropdown dropdown-hover\"><div tabindex=\"0\" role=\"button\" class=\"btn btn-circle btn-ghost btn-xs text-info\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-4 h-4 lucide lucide-info\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><path d=\"M12 16v-4\"></path><path d=\"M12 8h.01\"></path></svg></div><div tabindex=\"0\" class=\"card compact dropdown-content bg-base-200 rounded-box z-[1] w-72 shadow-2xl\"><div tabindex=\"0\" class=\"card-body\"><h2 class=\"card-title text-center\">Early Check-In Bonus</h2><p>This setting awards bonus points to the first, second, and third team to check-in to each location. </p><div class=\"prose text-sm\"><ul><li>First receives 2x the base points.</li><li>Second receives 1.5x the base points.</li><li>Third receives 1.2x the base points.</li></ul></div><p>Base points are awarded for each check-in and are set for each location.</p><p>This setting encourages players to race and disperse.</p></div></div></div></div><span class=\"label-text-alt text-error font-bold invisible text-right\" id=\"bonusPointsDisabled\">Disabled</span></div><label class=\"form-control w-full\"><div class=\"label\"><span class=\"label-text\">Enable bonus points for early check-ins?</span> <input type=\"checkbox\" id=\"enableBonusPoints\" name=\"enableBonusPoints\" class=\"toggle toggle-primary\" onchange=\"updatePreview()\"
 checked
></div></label> <label class=\"form-control w-full py-3\"><label class=\"label cursor-pointer\"></label></label></div><!-- End Bonus Points --><div class=\"text-center\"><button class=\"btn btn-primary w-1/2\">Save</button></div></div><!-- Preview Divider --><div class=\"divider lg:divider-horizontal py-5\"><div class=\"divider-text\">Preview</div></div><!-- Preview --><div class=\"flex h-min-content flex-col lg:px-5 px-3\"><div class=\"mockup-phone h-min sticky top-8\"><div class=\"camera\"></div><div class=\"display\"><div class=\"artboard artboard-demo phone lg:phone-2 p-5 overflow-y-scroll\" data-theme=\"cupcake\"><!-- Demo --><div class=\"sm:mx-auto sm:w-full sm:max-w-sm\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-compass w-16 h-16 mx-auto\"><path d=\"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z\"></path><circle cx=\"12\" cy=\"12\" r=\"10\"></circle></svg><h2 class=\"mt-5 mb-3 text-center text-2xl font-bold leading-9 tracking-tight\">Next location</h2><div class=\"prose\"><p class=\"text-center pb-5\">You may choose any of the following locations. Use the map below to help find where you want to go.</p><div id=\"locationList\" class=\"text-center\"></div><div id=\"navigationView\" class=\"text-center mt-5\"></div></div></div><!-- /Demo --></div></div></div></div></div></form><script>\nvar locations = [\n  { name: \"Eiffel Tower\", clue: \"Find the tallest structure in Paris.\" },\n  { name: \"Statue of Liberty\", clue: \"Look for the statue that welcomes visitors to New York Harbor.\" },\n  { name: \"Colosseum\", clue: \"Find the ancient amphitheater in Rome.\" },\n  { name: \"Great Wall of China\", clue: \"Search for the longest wall in the world.\" },\n  { name: \"Taj Mahal\", clue: \"Locate the white marble mausoleum in India.\" }\n];\n\nvar teams = Array.from({ length: locations.length }, () => Math.floor(Math.random() * 5) + 1);\n\nfunction getCheckedData(name) {\n  const checkedElement = document.querySelector(`input[name=\"${name}\"]:checked`);\n  return checkedElement ? checkedElement.getAttribute(\"data-index\") : null;\n}\n\nfunction updatePreview() {\n  const navigationMode = getCheckedData(\"navigationMode\");\n  const navigationMethod = getCheckedData(\"navigationMethod\");\n  let maxLocations = parseInt(document.getElementById('maxLocations').value) || 0;\n  const completionMethod = getCheckedData(\"completionMethod\");\n\n  updateMaxLocationsVisibility(navigationMode);\n  updateTeamCountVisibility(navigationMethod);\n\n  let locationListHtml = \"\";\n  let navigationViewHtml = \"\";\n\n  if (navigationMode === \"0\") { // Random mode\n    shuffleArray(locations);\n  } else if (navigationMode === \"2\") { // Ordered mode\n    maxLocations = 1;\n  }\n\n  const limit = (navigationMode === \"1\") ? locations.length : (maxLocations === 0 ? locations.length : Math.min(maxLocations, locations.length));\n\n  switch (navigationMethod) {\n    case \"0\": // Show Map\n      navigationViewHtml = '<div class=\"h-64 w-full bg-neutral-content rounded-lg shadow-lg flex justify-center items-center text-neutral\"><em>Map</em></div>';\n      break;\n    case \"1\": // Show Map and Names\n      locationListHtml = generateLocationList(limit, completionMethod);\n      navigationViewHtml = '<div class=\"h-64 w-full bg-neutral-content rounded-lg shadow-lg flex justify-center items-center text-neutral\"><em>Map</em></div>';\n      break;\n    case \"2\": // Show Location Names Only\n      locationListHtml = generateLocationList(limit, completionMethod);\n      break;\n    case \"3\": // Show Clues\n      navigationViewHtml = generateClueList(limit);\n      break;\n  }\n\n  if (navigationMode === \"1\") { // Free Roam mode\n    switch (navigationMethod) {\n      case \"0\": // Show Map\n        navigationViewHtml = '<div class=\"h-64 w-full bg-neutral-content rounded-lg shadow-lg flex justify-center items-center text-neutral\"><em>Map</em></div>';\n        break;\n      case \"1\": // Show Map and Names\n        locationListHtml = generateLocationList(locations.length, completionMethod);\n        navigationViewHtml = '<div class=\"h-64 w-full bg-neutral-content rounded-lg shadow-lg flex justify-center items-center text-neutral\"><em>Map</em></div>';\n        break;\n      case \"2\": // Show Location Names Only\n        locationListHtml = generateLocationList(locations.length, completionMethod);\n        break;\n      case \"3\": // Show Clues\n        navigationViewHtml = generateClueList(locations.length);\n        break;\n    }\n  }\n\n  const enablePointsElement = document.getElementById('enablePoints');\n  const enableBonusPointsElement = document.getElementById('enableBonusPoints');\n  const bonusPointsDisabledMessage = document.getElementById('bonusPointsDisabled');\n\n  if (!enablePointsElement.checked) {\n    enableBonusPointsElement.disabled = true;\n    bonusPointsDisabledMessage.classList.remove('invisible');\n  } else {\n    enableBonusPointsElement.disabled = false;\n    bonusPointsDisabledMessage.classList.add('invisible');\n  }\n\n  document.getElementById('locationList').innerHTML = locationListHtml;\n  document.getElementById('navigationView').innerHTML = navigationViewHtml;\n}\n\nfunction shuffleArray(array) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [array[i], array[j]] = [array[j], array[i]];\n  }\n}\n\nfunction generateLocationList(limit, completionMethod) {\n  let html = \"\";\n  for (let i = 0; i < limit; i++) {\n    html += `<p class=\"text-center\"><em>${locations[i].name}</em>`;\n    if (document.getElementById('showTeamCount').checked) {\n      html += `<br><span class=\"badge badge-ghost\">${teams[i]} Teams Visiting</span>`;\n    }\n    html += `</p>`;\n  }\n  return html;\n}\n\nfunction generateClueList(limit) {\n  let html = \"\";\n  for (let i = 0; i < limit; i++) {\n    html += `<blockquote class=\"text-center\">${locations[i].clue}</blockquote>`;\n  }\n  return html;\n}\n\nfunction updateMaxLocationsVisibility(navigationMode) {\n  const maxLocationsInput = document.getElementById('maxLocations');\n  const modeNameSpan = document.getElementById('mode-name');\n  const disabledMessage = document.querySelector('.label-text-alt.text-error');\n\n  if (navigationMode === \"0\") { // Random mode\n    maxLocationsInput.disabled = false;\n    disabledMessage.classList.add('hidden');\n  } else {\n    maxLocationsInput.disabled = true;\n    modeNameSpan.textContent = navigationMode === \"1\" ? \"Free Roam\" : \"Ordered\";\n    disabledMessage.classList.remove('hidden');\n  }\n}\n\nfunction updateTeamCountVisibility(navigationMethod) {\n  const showTeamCountInput = document.getElementById('showTeamCount');\n  const teamCountDisabledMessage = document.getElementById('teamCountDisabledMessage');\n\n  if (navigationMethod === \"3\") { // Show Clues\n    showTeamCountInput.disabled = true;\n    teamCountDisabledMessage.classList.remove('invisible');\n  } else {\n    showTeamCountInput.disabled = false;\n    teamCountDisabledMessage.classList.add('invisible');\n  }\n}\n\n// Initial update\nupdatePreview();\n</script>
