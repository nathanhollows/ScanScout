<div id=\"
\" class=\"indicator w-full\">
<span class=\"indicator-item indicator-top indicator-center badge badge-info\">
 pts</span>
<div class=\"card prose p-5 bg-base-200 shadow-lg w-full\">
<form id=\"photoForm\" hx-post=\"
\" hx-swap=\"none\"><input type=\"hidden\" name=\"block\" value=\"
\"> <label for=\"
\" class=\"form-control w-full\">
<p class=\"label-text font-bold text-success\">You got it!</p>
<form id=\"photoForm\" hx-post=\"/submit\" hx-trigger=\"submit\" class=\"space-y-6\"><div class=\"form-control\"><label id=\"uploadButton\" for=\"fileInput\" class=\"btn btn-primary w-full cursor-pointer\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-camera w-5 h-5\"><path d=\"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z\"></path><circle cx=\"12\" cy=\"13\" r=\"3\"></circle></svg> Upload Photo</label> <input type=\"file\" id=\"fileInput\" class=\"hidden\" accept=\"image/*\"></div><div id=\"previewContainer\" class=\"hidden flex flex-col items-center gap-4 mt-0\"><img id=\"imagePreview\" alt=\"Preview\" class=\"rounded-lg max-w-full m-auto\"> <progress id=\"progressBar\" class=\"progress progress-primary w-full\" value=\"0\" max=\"100\"></progress><div class=\"grid grid-cols-2 gap-4 w-full hidden\" id=\"actionButtons\"><label for=\"fileInput\" class=\"btn btn-secondary w-full\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-undo w-5 h-5\"><path d=\"M3 7v6h6\"></path><path d=\"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13\"></path></svg> Retry</label> <button id=\"submitButton\" type=\"submit\" class=\"btn btn-primary w-full\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-check w-5 h-5\"><path d=\"M20 6 9 17l-5-5\"></path></svg> Submit</button></div></div></form><script>\n                        (function() {\n                            const fileInput = document.getElementById('fileInput');\n                            const previewContainer = document.getElementById('previewContainer');\n                            const imagePreview = document.getElementById('imagePreview');\n                            const progressBar = document.getElementById('progressBar');\n                            const submitButton = document.getElementById('submitButton');\n                            const uploadButton = document.getElementById('uploadButton');\n                            const actionButtons = document.getElementById('actionButtons');\n                            const form = document.getElementById('photoForm');\n\n                            fileInput.addEventListener('change', async function(event) {\n                                const file = event.target.files[0];\n                                if (!file) return;\n\n                                const reader = new FileReader();\n                                reader.onload = function(e) {\n                                    imagePreview.src = e.target.result;\n                                    previewContainer.classList.remove('hidden');\n                                    uploadButton.classList.add('hidden');\n                                };\n                                reader.readAsDataURL(file);\n\n                                const formData = new FormData();\n                                formData.append('file', file);\n\n                                try {\n                                    const uploadUrl = await uploadFile(formData);\n                                    progressBar.classList.add('hidden');\n                                    actionButtons.classList.remove('hidden');\n\n                                    const hiddenInput = document.createElement('input');\n                                    hiddenInput.type = 'hidden';\n                                    hiddenInput.name = 'uploadedImageUrl';\n                                    hiddenInput.value = uploadUrl;\n                                    form.appendChild(hiddenInput);\n                                } catch (error) {\n                                    progressBar.classList.add('hidden');\n                                    actionButtons.classList.remove('hidden');\n                                    submitButton.classList.add('hidden');\n                                    console.error(error);\n                                }\n                            });\n\n                            async function uploadFile(formData) {\n                                return new Promise((resolve, reject) => {\n                                    const xhr = new XMLHttpRequest();\n                                    xhr.open('POST', '/upload/image', true);\n\n                                    xhr.upload.addEventListener('progress', function(e) {\n                                        if (e.lengthComputable) {\n                                            const percentComplete = (e.loaded / e.total) * 100;\n                                            progressBar.value = percentComplete;\n                                        }\n                                    });\n\n                                    xhr.onload = function() {\n                                        if (xhr.status === 200) {\n                                            resolve(JSON.parse(xhr.responseText).url);\n                                        } else {\n                                            reject(new Error('Upload failed'));\n                                        }\n                                    };\n\n                                    xhr.onerror = function() {\n                                        reject(new Error('Upload error'));\n                                    };\n\n                                    xhr.send(formData);\n                                });\n                            }\n                        })();\n                    </script> <div class=\"join w-full hidden\"><input id=\"
\" name=\"photo\" type=\"text\" placeholder=\"Photo\" class=\"input input-bordered input-primary join-item w-full max-w-xs\" autoComplete=\"off\" required></div>
</label></form></div></div>
<div id=\"
\" class=\"indicator w-full\" hx-swap-oob=\"true\">
<span class=\"indicator-item indicator-top indicator-center badge badge-info\">
 pts</span>
<div class=\"card prose p-5 bg-base-200 shadow-lg w-full\">
<form hx-post=\"
\" hx-swap=\"none\"><input type=\"hidden\" name=\"block\" value=\"
\"> <label for=\"
\" class=\"form-control w-full\">
<p class=\"label-text font-bold text-success\">You got it!</p>
<div class=\"join w-full animate-[wobble_1s_ease-in-out]\"><input id=\"
\" name=\"photo\" type=\"text\" placeholder=\"Photo\" class=\"input input-bordered input-primary join-item w-full max-w-xs\" autoComplete=\"off\" required> <button class=\"btn btn-primary btn-outline join-item rounded-r-full\">Check <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-send-horizontal w-4 h-5\"><path d=\"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z\"></path><path d=\"M6 12h16\"></path></svg></button></div>
</label></form></div></div>
<form id=\"
\" hx-post=\"
\" hx-trigger=\"
\" hx-swap=\"none\">
<label class=\"form-control w-full mt-5\"><div class=\"label\"><span class=\"label-text font-bold\">Points</span></div><label class=\"input input-bordered flex items-center gap-2\"><input name=\"points\" type=\"number\" class=\"grow\" placeholder=\"Search\" value=\"
\"> <span class=\"badge badge-info tooltip tooltip-left cursor-help\" data-tip=\"Set to 0 to disable\">Optional</span></label></label> 
<label for=\"
\" class=\"form-control w-full\"><div class=\"label\"><span class=\"label-text font-bold\">Prompt</span></div><textarea id=\"
\" name=\"prompt\" rows=\"2\" class=\"markdown-textarea textarea textarea-bordered w-full font-mono\" style=\"field-sizing: content;\" placeholder=\"What is third word of the second paragraph? What is the middle name of the person wearing a red hat?\">
</textarea><div class=\"label\">
</div></label></form>
